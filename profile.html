<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Stummy</title>

    <!-- Bootstrap -->
    <link href="vendor/css/bootstrap.min.css" rel="stylesheet">
    <link href="custom/css/style1.css" rel="stylesheet">
    <link href="vendor/css/bootstrap-dialog.min.css" rel="stylesheet">
    <link href="vendor/css/datepicker.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="custom/images/favicon.png">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="index_body">
    <div class="container">
        <div class="row setup-content" id="step-3">
                <div class="col-xs-12 ">
                    <ul id="paymentMode" class="nav nav-tabs">
                        <li class="active"><span><img class="imgIcon" src="./custom/images/contact.png"><a href="#pi" data-toggle="tab" class="pi">Personal Information</a></span></li>
                        <li class=""><span><img class="imgIcon" src="./custom/images/home.png"><a href="#ha" data-toggle="tab" class="ha">Home Address</a></span></li>
                        <li class=""><span><img class="imgIcon" src="./custom/images/delivery1.png"><a href="#da" data-toggle="tab" class="da">Delivery Address</a></span></li>
                        
                    </ul>
                    <div id="myTabContent" class="tab-content hidden-xs">
                        <div class="tab-pane fade in active" id="pi">
                            <center>
							<img  id='userProfilePic' class='navToggle img-responsive img-circle'>
<a href="#" id="changeProfilePic">Change Picture</a><br/><br/>
<!-- <input type="file" id="photo_bro" accept="image/*" class="input1 form-group" size="6"></input> -->
<div class="input-group changeProfilePicData" style="display: none;">
	<span class="input-group-btn">
		<span class="btn btn-primary btn-file">
			Browseâ€¦ <input type="file" id="photo_bro" accept="image/*">
		</span>
	</span>
	<input type="text" class="form-control" readonly="">
</div>	
<input tye="text" id="dob" placeholder="Select Date of Birth" class="form-control" readonly style="width: 40%;"/><br/>
<input tye="text" id="mailid" placeholder="Enter Email Id" class="form-control" style="width: 40%;"/>
</center>
                        </div>
						<div class="tab-pane fade" id="da">
                            <!-- <p>Use our secured payment gate way for the payment</p> -->
							<div class="panel panel-primary editDeliveryAddress address" style="display: block;">
                                <div class="panel-heading ">
                                    <h4>
                          Update Delivery Address
                          </h4>
                                </div>

                                <form id="deliveryAddress" class="form-horizontal">
                                    <div class="form-group">
                                        <label for="deliveryFirstName" class="col-sm-2 control-label">Name</label>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control" id="deliveryFirstName" placeholder="First Name">

                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control" id="deliveryLastName" placeholder="Last Name">

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="deliveryPhone" class="col-sm-2 control-label">Phone</label>
                                        <div class="col-sm-10">
                                            <input type="phone" class="form-control" id="deliveryPhone" placeholder="Enter Phone Number">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="deliveryDNo" class="col-sm-2 control-label">Address</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="deliveryDNo" placeholder="Enter Address">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="deliveryStreet" class="col-sm-2 control-label">Area</label>
                                        <div class="col-sm-10">
                                            <select class="form-control" id="deliveryStreet"><option data-pin="500072" value="KPHB">KPHB</option><option data-pin="500082" value="Gachibowli">Gachibowli</option></select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="deliveryPinCode" class="col-sm-2 control-label">Pincode</label>
                                        <div class="col-sm-10">
                                            <select class="form-control" id="deliveryPinCode"><option data-street="KPHB" value="500072">500072</option><option data-street="Gachibowli" value="500082">500082</option></select>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>                        
                        <div class="tab-pane fade" id="ha">
                            <div class="panel panel-primary editHomeAddress address" style="display: block;">
                                <div class="panel-heading ">
                                    <h4>
                          Update Home Address
                          </h4>
                                </div>
                                <form id="homeAddress" class="form-horizontal">
                                    <div class="form-group">
                                        <label for="inputEmail3" class="col-sm-2 control-label">Name</label>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control" id="homeFirstName" placeholder="First Name">

                                        </div>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control" id="homeLastName" placeholder="Last Name">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="inputEmail3" class="col-sm-2 control-label">Phone</label>
                                        <div class="col-sm-10">
                                            <input type="phone" class="form-control" id="homePhone" placeholder="Enter Phone Number">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="homeDNo" class="col-sm-2 control-label">Address</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="homeDNo" placeholder="Enter Address">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="homeStreet" class="col-sm-2 control-label">Area</label>
                                        <div class="col-sm-10">
                                            <select class="form-control" id="homeStreet"><option data-pin="500072" value="KPHB">KPHB</option><option data-pin="500082" value="Gachibowli">Gachibowli</option></select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="homePinCode" class="col-sm-2 control-label">Pincode</label>
                                        <div class="col-sm-10">
                                            <select class="form-control" id="homePinCode"><option data-street="KPHB" value="500072">500072</option><option data-street="Gachibowli" value="500082">500082</option></select>
                                        </div>
                                    </div>
							</form>

                            </div>
                        </div>
                        
                    </div>
					<button class="updateProfile btn btn-primary btn-block">Update Profile</button>
                </div>
            </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="vendor/js/jquery-1.11.3.min.js"></script>
    <!--<script src="custom/js/SocialLogin.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>-->
    <!-- <script src="custom/js/md5.js"></script> -->
    <script src="vendor/js/bootstrap.min.js"></script>
    <script src="vendor/js/bootstrap-dialog.min.js"></script>
	<script src="vendor/js/bootstrap-tabcollapse.js"></script>
	<script src="vendor/js/bootstrap-datepicker.js"></script>
    <script>
        $(document).ready(function() {
			var userInfo = JSON.parse(localStorage.getItem('userInfo'))[0];
		    $("#homeFirstName").val(userInfo.FirstName);
	        $("#homeLastName").val(userInfo.LastName);
	        $("#homePhone").val(userInfo.HomePhone);
			$("#homeDNo").val(userInfo.HomeDNo);
			$("#homePinCode").val(userInfo.HomePostalCode);
			$("#mailid").val(userInfo.Email);
			$("#dob").val(userInfo.Birthdate);
	        $("#deliveryFirstName").val(userInfo.DeliveryFirstName);
	        $("#deliveryLastName").val(userInfo.DeliveryLastName);
	        $("#deliveryPhone").val(userInfo.DeliveryPhone);
			$("#deliveryDNo").val(userInfo.DeliveryDNo);
			$("#deliveryPinCode").val(userInfo.DeliveryPostalCode);
			$('#userProfilePic').attr('src','data:image/png;base64,'+userInfo.pic);
		    $('#dob').datepicker({
				format: 'dd-mm-yyyy h:M:s',
			});
            if (sessionStorage.getItem("promotionsFlag") == null) {
                $('#advertiseModel').modal('show');
            }
            $(".closeAdd").click(function() {
                sessionStorage.setItem("promotionsFlag", true);
            })
			$('#paymentMode').tabCollapse();
			$("#photo_bro").change(function(){
				var filePdf = document.getElementById("photo_bro");
				var file = filePdf.files[0];
				theImage = new Image();
				theImage.src = document.getElementById("photo_bro").value;
				create_blob(file, function(blob_string) {
					var cont = blob_string;
					var base64val = cont;
					$('#userProfilePic').attr('src',base64val);	  
				});
			});
			function create_blob(file, callback) {
				var reader = new FileReader();
				reader.onload = function() { callback(reader.result) };
				var content = reader.readAsDataURL(file);    
			}
			$('.updateProfile').click(function(){
				console.log($('#userProfilePic').attr('src').split('base64,')[1])
				userInfo.pic = $('#userProfilePic').attr('src').split('base64,')[1];
				userInfo.Birthdate = $('#dob').val();
				userInfo.Email = $('#mailid').val();
				userInfo.FirstName = $("#homeFirstName").val();
				userInfo.LastName = $("#homeLastName").val();
				userInfo.HomePhone = $("#homePhone").val();
				userInfo.HomeDNo = $("#homeDNo").val();
				userInfo.HomeStreet = $("#homeStreet").val();
				userInfo.HomePostalCode = $("#homePinCode").val();
				userInfo.DeliveryFirstName = $("#deliveryFirstName").val();
				userInfo.DeliveryLastName = $("#deliveryLastName").val();
				userInfo.DeliveryPhone = $("#deliveryPhone").val();
				userInfo.DeliveryDNo = $("#deliveryDNo").val();
				userInfo.DeliveryStreet = $("#deliveryStreet").val();
				userInfo.DeliveryPostalCode = $("#deliveryPinCode").val();
				var userData = [];
				userData[0] = userInfo;
				localStorage.setItem('userInfo',JSON.stringify(userData));
			});
			$('#changeProfilePic').click(function(){
				$('.changeProfilePicData').toggle('slow');
			});
		});
    </script>
<style>
#changeProfilePic{
	font-size: 14px;
}
.navToggle{
height: 100px !important;
}
</style>
</body>

</html>
